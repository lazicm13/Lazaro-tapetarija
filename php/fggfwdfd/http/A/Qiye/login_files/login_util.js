String.prototype.replaceAll=function(b,a){var c=new RegExp(b,"g");return this.replace(c,a)};String.prototype.trim=function(){return this.replace(/(^\s+)|(\s+$)/g,"")};var cookie=function(k,j,m){if(typeof j=="undefined"){j=null;if(document.cookie&&document.cookie!=""){var g=document.cookie.split(";");for(var f=0;f<g.length;f++){var h=g[f].trim();if(h.substring(0,k.length+1)==(k+"=")){j=decodeURIComponent(h.substring(k.length+1));break}}}return j}m=m||{};if(j===null){j="";m.expires=-1}var b="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var d;if(typeof m.expires=="number"){d=new Date();d.setTime(d.getTime()+(m.expires*24*60*60*1000))}else{d=m.expires}b="; expires="+d.toUTCString()}var l=m.path?"; path="+(m.path):"";var e=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[k,"=",encodeURIComponent(j),b,l,e,a].join("")};var msgMap={"input.account_name":"请输入登录帐号","input.email":"请输入完整的邮箱地址","input.password":"请你输入密码","input.noat":"请使用不包括@部分帐号登录","input.account_name.en_US":"please enter your account","input.email.en_US":"please enter your email address","input.password.en_US":"please enter your password","input.noat.en_US":"please enter your account without '@'","input.account_name.zh_TW":"請輸入登錄帳號","input.email.zh_TW":"請輸入完整的郵箱地址","input.password.zh_TW":"請你輸入密碼","input.noat.zh_TW":"請使用不包括@部分的帐号登录"};function showTips(){var c=document.getElementById("divText");if(c){var a=c.getElementsByTagName("p").length;var b=1;setInterval(function d(){b=b<a?b+1:1;c.className="mod text-mod text-mod-"+b},5000)}}var defaultClass="ipt-t";var isClassDefault=false;var code="input.account_name";var hl=getHl();function getHl(){var a=getParam("hl");if(!a){a=cookie("hl")}if(a=="en"){a="en_US"}if(a=="zh-TW"){a="zh_TW"}if(a=="zh-cn"){a="zh_CN"}return a||"zh_CN"}function getId(a){return document.getElementById(a)}function getParam(c){var d=decodeURI(location.search.substring(1));if(d==""){return null}var a=d.split("&");for(var b=0;b<a.length;b++){if(a[b].indexOf(c+"=")==0){return a[b].substring(c.length+1)}}return null}function getMsg(a){var b=msgMap[a+"."+hl];if(!b){b=msgMap[a]}return b}function setMsgpid(a){$("#app-download-wrapper").hide();$("#err-wrapper").show();$("#msgpid").text(a)}function showError(c,b){var d=getMsg(c);var a=getId("msgpid");if(a){setMsgpid(d)}else{alert(d)}if(b){b.focus()}}function setMsg(){var a=getId("msgpid");if(!a||a.innerHTML.trim()==""){var b=cookie("ex_msg");if(!b){return}b=b.replaceAll("\\+"," ");if(a){setMsgpid(b)}else{alert(b)}cookie("ex_msg","")}}window.onload=function(){setMsg();showTips();var d=getId("domain").value;var c=location.hostname;var g=c.indexOf("mail.");if(g==0){d=c.substring(5)}g=c.indexOf("mail.qiye.");if(g==0&&c!="mail.qiye.163.com"){d=c.substring(10);var b=getId("msgpid");var e=getParam("msg");if(b){setMsgpid("")}if(e){setMsgpid("登录失败，请重新尝试")}}if(d==""){code="input.email"}account=getId("account_name");isClassDefault=(account.className.indexOf(defaultClass)>-1);account.onfocus=function(){if(this.value==getMsg(code)){this.value="";if(isClassDefault){this.className="ipt-t"}}};account.onblur=function(){if(this.value==""){this.value=getMsg(code);if(isClassDefault){this.className="ipt-t ipt-sample"}}};var a=cookie("qiye_account");var f="@"+d;if(a&&(a.indexOf(f)==a.length-f.length)){if(isClassDefault){account.className="ipt-t"}if(d==""){account.value=a}else{account.value=a.replace("@"+d,"")}getId("remUsername").checked="checked";getId("password").focus()}else{if(d!=""){account.value="";account.focus()}else{account.value=getMsg(code)}}};function frmvalidator(){account=getId("account_name");p=getId("password");var f=account.value;var g=p.value;var d=getId("domain").value;if(f==""||f==getMsg(code)){showError(code,account);return false}if(g==""){showError("input.password",p);return false}var e=f.indexOf("@");if(e>0){var h=f.substring(e+1);if(d==""||d=="qiye.163.com"){getId("domain").value=h}else{if(h!=d){showError("input.noat");return false}}account.value=f.substring(0,e)}else{if(d==""){showError("input.email",account);return false}}var b=getId("loginform");var a=b.action;if(!a){a="https://entry.qiye.163.com/domain/domainEntLogin"}if(getId("secure").checked||(getId("all_secure")&&getId("all_secure").checked)){a=a.replace("http:","https:")}else{a=a.replace("https:","http:")}b.action=a;var i=location.hostname;if(getId("remUsername").checked){var c=account.value+"@"+d;cookie("qiye_account",c,{domain:i,path:"/",expires:4})}else{cookie("qiye_account","",{domain:i,path:"/",expires:0})}cookie("hl",hl,{domain:i,path:"/",expires:4});return true}function DrawImage(d,a,c){if(d==null||d.src==null){return}var b=new Image();b.src=d.src;if(b.width>0&&b.height>0){if(b.width/b.height>=a/c){if(b.width>a){d.width=a;d.height=(b.height*a)/b.width}else{d.width=b.width;d.height=b.height}}else{if(b.height>c){d.height=c;d.width=(b.width*c)/b.height}else{d.width=b.width;d.height=b.height}}}};